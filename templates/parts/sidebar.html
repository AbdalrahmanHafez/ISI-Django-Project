{% load static %}

<aside class="app-sidebar bg-body-secondary shadow" data-bs-theme="dark"> <!--begin::Sidebar Brand-->
    <div class="sidebar-brand">
       <a href="{% url "home" %}" class="brand-link"> 
        <img src="{% static 'images/logo.png' %}" alt="Logo" style="width:60px; height:60px;" class="me-1">
        <span class="brand-text fw-light">منظومة شئون ضباط</span>
      </a>
    </div>
       
    <div class="sidebar-wrapper">

      
      <!-- Date and Time -->
        <nav class="d-flex justify-content-center">
          <span id="current-date" style="font-size: 14px; color: #dcdedf;"></span>_
          <span id="current-time" style="font-size: 14px; color: #dcdedf;"></span>
        </nav>

      <div class="user-panel mt-3 pb-3 mb-3 d-flex align-items-center" style="background-color: #f4f6f9; padding: 10px; border-radius: 10px;">
        <div class="image me-3">
          <img src="{% static 'images/user-placeholder.png' %}" class="rounded-circle elevation-3" alt="User Image" style="width: 50px; height: 50px; border: 2px solid #007bff; padding: 3px; box-shadow:0 10px 20px rgba(0,0,0,.19),0 6px 6px rgba(0,0,0,.23)!important">
        </div>
        <div class="info">
          <span class="text-bold d-block" style="font-size: 14px; color: #6c757d;">المستخدم الآن</span>
          <a href="#" class="d-block" style="font-size: 18px; font-weight: bold; color: #007bff; text-decoration: none;">
            {{ request.user.username }}
          </a>
        </div>
      </div>

      <nav class="mt-2"> 
        <!--begin::Sidebar Menu-->
        <ul class="nav sidebar-menu flex-column" data-lte-toggle="treeview" role="menu" data-accordion="false">
            
            <!-- Officers List -->
            <li class="nav-item">
                <a href="{% url 'officers' %}" class="nav-link">
                    <i class="nav-icon fas fa-th"></i>
                    <p> قائمة جميع الضباط </p>
                </a>
            </li>
    
            <!-- Ranks Section -->
            <li class="nav-item has-treeview">
                <a href="#" class="nav-link active">
                    <i class="nav-icon fas fa-star"></i>
                    <p> الرتب <i class="fas fa-angle-left right"></i> </p>
                </a>
    
                <ul class="nav nav-treeview">
                    {% if perms.officers_affairs.add_rank %}
                    <!-- Add Rank Form Trigger -->
                    <li class="nav-item">
                        <a id="addrank" href="#" class="nav-link">
                            <i class="fa fa-plus "></i>
                            <p class="text-light"> إضافة </p>
                        </a>
                    </li>
    
                    <!-- Hidden Rank Add Form -->
                    <li id="rankinput" class="nav-item" style="display: none;">
                        <form id="rank_add_form" method="POST" enctype="multipart/form-data" data-bs-theme="light">
                            {% csrf_token %}
                            {{ formrank.as_p }}
    
                            <button type="submit" class="btn btn-success">حفظ</button>
                            <button id="backrank" type="button" class="btn btn-primary">تراجع</button>
                        </form>
                    </li>
                    {% endif %}
    
                    <!-- Display Existing Ranks -->
                    {% if perms.officers_affairs.view_rank %}
                    {% for rank in ranks %}
                    <li class="nav-item">
                        <a href="#" class="nav-link">
                            <i class="far fa-circle nav-icon"></i>
                            <p>{{ rank.name }}</p>
                        </a>
                    </li>
                    {% endfor %}
                    {% endif %}
                </ul>
            </li>
    
            <!-- Borrowed Books Section -->
            <li class="nav-header">الكتب المستعارة</li>
            <li class="nav-item">
                <a id="statusSold" class="nav-link">
                    <i class="nav-icon far fa-circle text-danger"></i>
                    <p>تم بيعه</p>
                </a>
            </li>
            <li class="nav-item">
                <a class="nav-link">
                    <i class="nav-icon far fa-circle text-warning"></i>
                    <p>تم استعارته</p>
                </a>
            </li>
    
            <!-- Change Password Link -->
            <li class="nav-item">
                <a href="{% url 'change_password' %}" class="nav-link" data-toggle="modal" data-target="#changePasswordModal">
                    <i class="nav-icon fas fa-key"></i>
                    <p>تغيير كلمة المرور</p>
                </a>
            </li>
        </ul>
    </nav>
      <!-- /.sidebar-menu -->
    </div>

    <!-- /.sidebar -->

                  

  </aside>



  <!-- في المكان ده هحط المحتوى -->



<!-- JavaScript for real-time Arabic Date and Time in 12-hour format -->
<script>
  function updateDateTime() {
    const optionsDate = { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric', timeZone: 'Africa/Cairo' };
    const optionsTime = { hour: 'numeric', minute: 'numeric', second: 'numeric', hour12: true, timeZone: 'Africa/Cairo' };
    
    const now = new Date();
    const date = now.toLocaleDateString('ar-EG', optionsDate);
    const time = now.toLocaleTimeString('ar-EG', optionsTime);

    document.getElementById('current-date').textContent = date;
    document.getElementById('current-time').textContent = time;
  }

  // Update date and time every second
  setInterval(updateDateTime, 1000);

  // Initial call to set the time immediately
  updateDateTime();


// $('#rank_add_form').click(function(e) {
//     e.preventDefault();
//     e.stopPropagation();
// });

</script>



